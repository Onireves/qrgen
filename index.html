<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate QR Pro</title>
    <script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
    <style>
        /* --- Default Dark Theme Variables --- */
        :root {
            --bg-color: #000000;
            --card-bg: #1c1c1e;
            --text-primary: #f5f5f7;
            --text-secondary: #a1a1a6;
            --accent: #0a84ff; /* Apple System Blue Dark */
            --accent-hover: #409cff;
            --input-bg: #2c2c2e;
            --border-color: #38383a;
            --phone-border: #222;
            --phone-frame: #333;
            --transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        /* --- Light Theme Override --- */
        [data-theme="light"] {
            --bg-color: #f5f5f7;
            --card-bg: #ffffff;
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
            --accent: #0071e3; /* Apple System Blue Light */
            --accent-hover: #0077ed;
            --input-bg: #f2f2f7;
            --border-color: #d1d1d6;
            --phone-border: #dcdcdc;
            --phone-frame: #e5e5e5;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            transition: background-color 0.5s ease;
        }

        /* --- Header / Toggle Switch --- */
        .top-nav {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
        }
        
        .theme-toggle {
            background: var(--input-bg);
            border: none;
            color: var(--text-primary);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        .theme-toggle:hover { background: var(--border-color); }
        .theme-toggle svg { width: 20px; height: 20px; fill: currentColor; }

        /* --- Main Layout --- */
        .app-layout {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 80px;
            width: 100%;
            max-width: 1100px;
            padding: 40px;
        }

        /* --- Left Panel --- */
        .left-panel {
            flex: 1;
            max-width: 460px;
            display: flex;
            flex-direction: column;
            text-align: left;
        }

        h1 {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        p.subtitle {
            color: var(--text-secondary);
            font-size: 19px;
            margin-bottom: 32px;
            line-height: 1.4;
        }

        /* Inputs Area */
        .controls-group {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
        }

        .input-wrapper input[type="text"] {
            width: 100%;
            padding: 18px 20px;
            font-size: 17px;
            border: 1px solid transparent;
            border-radius: 16px;
            background: var(--input-bg);
            color: var(--text-primary);
            outline: none;
            transition: var(--transition);
        }
        
        .input-wrapper input[type="text"]:focus {
            background: var(--card-bg);
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.15);
        }

        /* Customize Row: Color Picker & Logo Upload */
        .customize-row {
            display: flex;
            gap: 12px;
        }

        .custom-btn {
            flex: 1;
            background: var(--input-bg);
            border-radius: 14px;
            padding: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .custom-btn:hover { background: var(--border-color); }

        /* Hidden inputs triggered by labels/clicks */
        input[type="color"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
            left: 0; top: 0;
        }
        
        input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
            left: 0; top: 0;
        }
        
        .color-preview {
            width: 16px; height: 16px; 
            border-radius: 50%; border: 1px solid var(--text-secondary);
            background-color: #000; /* default */
        }

        /* Action Buttons */
        .download-options {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 30px;
        }

        button.action-btn {
            background: var(--card-bg);
            color: var(--accent);
            border: 1px solid var(--border-color); /* Subtle border for dark mode visibility */
            padding: 14px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        button.action-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        /* --- Improved Tips Section (Grid Stack Fix) --- */
        .tips-container {
            display: grid;
            /* Stack all items in one cell */
            grid-template-areas: "stack"; 
            min-height: 80px; /* Safe height for mobile wrapping */
            border-top: 1px solid var(--border-color);
            padding-top: 24px;
            align-items: start;
        }

        .tip {
            grid-area: stack; /* All tips occupy same space */
            font-size: 15px;
            color: var(--text-secondary);
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.6s ease, transform 0.6s ease;
            pointer-events: none; /* Prevent interaction with hidden tips */
            line-height: 1.5;
        }

        .tip.active { opacity: 1; transform: translateY(0); }
        .tip.exit { opacity: 0; transform: translateY(-10px); }
        .tip strong { color: var(--accent); font-weight: 600; }

        /* --- Right Panel: iPhone --- */
        .right-panel { flex: 0 0 auto; position: relative; }

        .iphone-frame {
            width: 300px;
            height: 600px;
            background: var(--phone-frame);
            border-radius: 54px;
            box-shadow: 
                0 0 0 4px var(--phone-border),
                0 40px 100px -20px rgba(0,0,0,0.5);
            padding: 14px;
            transition: var(--transition);
        }

        .screen {
            background: #ffffff; /* Always white for scanner simulation */
            width: 100%;
            height: 100%;
            border-radius: 42px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .notch {
            position: absolute; top: 18px; left: 50%; transform: translateX(-50%);
            width: 90px; height: 26px; background: #000; border-radius: 20px; z-index: 10;
        }

        .screen-ui-top {
            position: absolute; top: 70px;
            color: #333; font-size: 12px; font-weight: 700;
            text-transform: uppercase; letter-spacing: 1px; opacity: 0.5;
        }

        #canvas-container {
            width: 200px; height: 200px;
            display: flex; align-items: center; justify-content: center;
            transition: var(--transition);
        }
        #canvas-container canvas { border-radius: 12px; }

        /* --- Mobile Responsive --- */
        @media (max-width: 950px) {
            .app-layout { flex-direction: column; gap: 50px; padding: 20px 0; }
            .left-panel { order: 1; width: 100%; text-align: center; }
            .right-panel { order: 2; }
            .customize-row { justify-content: center; }
            h1 { font-size: 36px; }
            /* Tips: Center text on mobile */
            .tips-container { text-align: center; justify-items: center; } 
        }
    </style>
</head>
<body>

    <!-- Theme Toggle -->
    <div class="top-nav">
        <button class="theme-toggle" id="themeBtn" onclick="toggleTheme()" aria-label="Toggle Dark Mode">
            <!-- Sun Icon -->
            <svg class="sun-icon" viewBox="0 0 24 24" style="display:none">
                <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
            </svg>
            <!-- Moon Icon -->
            <svg class="moon-icon" viewBox="0 0 24 24">
                <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-3.03 0-5.5-2.47-5.5-5.5 0-1.82.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>
            </svg>
        </button>
    </div>

    <div class="app-layout">
        <!-- Left Panel -->
        <div class="left-panel">
            <h1>Ultimate QR Pro</h1>
            <p class="subtitle">Create branded, scan-ready codes instantly.</p>

            <div class="controls-group">
                <div class="input-wrapper">
                    <input type="text" id="urlInput" placeholder="https://example.com" autofocus autocomplete="off">
                </div>
                
                <div class="customize-row">
                    <!-- Color Picker -->
                    <div class="custom-btn">
                        <div class="color-preview" id="colorPreview"></div>
                        <span>Pick Color</span>
                        <input type="color" id="colorInput" value="#000000">
                    </div>
                    
                    <!-- Logo Upload -->
                    <div class="custom-btn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                        </svg>
                        <span>Add Logo</span>
                        <input type="file" id="logoInput" accept="image/*">
                    </div>
                </div>
            </div>

            <div class="download-options">
                <button class="action-btn" onclick="downloadQR('png')">PNG</button>
                <button class="action-btn" onclick="downloadQR('jpeg')">JPG</button>
                <button class="action-btn" onclick="downloadQR('svg')">SVG</button>
            </div>

            <div class="tips-container">
                <div class="tip active"><strong>Pro Tip:</strong> Dark mode generates the same code, but the preview is easier on your eyes.</div>
                <div class="tip"><strong>New Feature:</strong> Tap "Pick Color" to match your brand identity.</div>
                <div class="tip"><strong>Did you know?</strong> Adding a logo in the center increases trust by 40%.</div>
                <div class="tip"><strong>SVG Format:</strong> Use SVG for billboards or large print scaling.</div>
            </div>
        </div>

        <!-- Right Panel -->
        <div class="right-panel">
            <div class="iphone-frame">
                <div class="screen">
                    <div class="notch"></div>
                    <div class="screen-ui-top">Scan Preview</div>
                    <div id="canvas-container"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. QR Code Initialization ---
        const qrCode = new QRCodeStyling({
            width: 200,
            height: 200,
            type: "svg",
            data: "https://example.com",
            image: "",
            dotsOptions: { color: "#000000", type: "rounded" },
            backgroundOptions: { color: "#ffffff" },
            imageOptions: { crossOrigin: "anonymous", margin: 5 },
            cornersSquareOptions: { type: "extra-rounded" }
        });

        const container = document.getElementById("canvas-container");
        qrCode.append(container);

        // --- 2. Event Listeners ---
        const urlInput = document.getElementById("urlInput");
        const colorInput = document.getElementById("colorInput");
        const colorPreview = document.getElementById("colorPreview");
        const logoInput = document.getElementById("logoInput");

        // Live URL Update
        urlInput.addEventListener("input", (e) => {
            qrCode.update({ data: e.target.value || "https://example.com" });
        });

        // Color Update
        colorInput.addEventListener("input", (e) => {
            const color = e.target.value;
            colorPreview.style.backgroundColor = color; // Update UI circle
            qrCode.update({ dotsOptions: { color: color } });
        });

        // Logo Upload
        logoInput.addEventListener("change", (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = () => {
                    qrCode.update({ image: reader.result });
                };
                reader.readAsDataURL(file);
            }
        });

        // Download
        function downloadQR(format) {
            qrCode.download({ name: "my-qr-code", extension: format });
        }

        // --- 3. Tips Animation (Fade Loop) ---
        const tips = document.querySelectorAll('.tip');
        let currentTip = 0;
        
        setInterval(() => {
            tips[currentTip].classList.remove('active');
            tips[currentTip].classList.add('exit'); // Slide up out

            setTimeout(() => {
                tips[currentTip].classList.remove('exit'); // Reset position
                currentTip = (currentTip + 1) % tips.length;
                tips[currentTip].classList.add('active'); // Slide up in
            }, 600); // Wait for CSS transition
        }, 5000);

        // --- 4. Dark/Light Mode Toggle ---
        const themeBtn = document.getElementById('themeBtn');
        const sunIcon = document.querySelector('.sun-icon');
        const moonIcon = document.querySelector('.moon-icon');
        let isDark = true; // Default

        function toggleTheme() {
            isDark = !isDark;
            document.body.setAttribute('data-theme', isDark ? 'dark' : 'light');
            
            if (isDark) {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            } else {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            }
        }
    </script>
</body>
</html>
